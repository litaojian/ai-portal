# AI Portal ç»„ä»¶ä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£æä¾›äº† AI Portal é¡¹ç›®ä¸­æ‰€æœ‰é€šç”¨ç»„ä»¶çš„ä½¿ç”¨è¯´æ˜å’Œæœ€ä½³å®è·µã€‚

## ğŸ“‹ ç›®å½•

1. [åˆ—è¡¨é¡µç»„ä»¶](#åˆ—è¡¨é¡µç»„ä»¶)
2. [è¡¨å•é¡µç»„ä»¶](#è¡¨å•é¡µç»„ä»¶)
3. [åŠ è½½çŠ¶æ€ç»„ä»¶](#åŠ è½½çŠ¶æ€ç»„ä»¶)
4. [æ— éšœç¢ç»„ä»¶](#æ— éšœç¢ç»„ä»¶)
5. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## åˆ—è¡¨é¡µç»„ä»¶

### ListFilters - åˆ—è¡¨ç­›é€‰å™¨

**ä½ç½®**: `components/common/list-filters.tsx`

**åŠŸèƒ½**: æä¾›æœç´¢ã€çŠ¶æ€ç­›é€‰ã€å¿«æ·ç­›é€‰å’Œè‡ªå®šä¹‰ç­›é€‰åŠŸèƒ½

**ç¤ºä¾‹**:

```typescript
import { ListFilters } from "@/components/common/list-filters";
import { getStatusOptions } from "@/components/common/status-badge";

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
<ListFilters
  searchPlaceholder="æœç´¢ç”¨æˆ·åæˆ–é‚®ç®±..."
  statusOptions={getStatusOptions(["active", "inactive"])}
  quickFilters={[
    { value: "vip", label: "VIPç”¨æˆ·", count: 45 },
    { value: "new", label: "æ–°ç”¨æˆ·", count: 128 }
  ]}
  onSearch={(value) => console.log("æœç´¢:", value)}
  onStatusChange={(status) => console.log("çŠ¶æ€:", status)}
  onQuickFilterChange={(filters) => console.log("å¿«æ·ç­›é€‰:", filters)}
  onReset={() => console.log("é‡ç½®")}
  customFilters={
    <DateRangePicker
      value={dateRange}
      onChange={setDateRange}
      placeholder="é€‰æ‹©æ—¥æœŸèŒƒå›´"
    />
  }
/>
```

**Props**:

- `searchPlaceholder?: string` - æœç´¢æ¡†å ä½ç¬¦
- `statusOptions?: FilterOption[]` - çŠ¶æ€ä¸‹æ‹‰é€‰é¡¹
- `quickFilters?: QuickFilter[]` - å¿«æ·ç­›é€‰æ ‡ç­¾
- `customFilters?: React.ReactNode` - è‡ªå®šä¹‰ç­›é€‰å™¨æ’æ§½
- `onSearch?: (value: string) => void` - æœç´¢å›è°ƒ
- `onStatusChange?: (value: string) => void` - çŠ¶æ€å˜æ›´å›è°ƒ
- `onQuickFilterChange?: (values: string[]) => void` - å¿«æ·ç­›é€‰å›è°ƒ
- `onReset?: () => void` - é‡ç½®å›è°ƒ

---

### StatusBadge - çŠ¶æ€æ ‡ç­¾

**ä½ç½®**: `components/common/status-badge.tsx`

**åŠŸèƒ½**: ç»Ÿä¸€çš„çŠ¶æ€æ˜¾ç¤ºæ ‡ç­¾ï¼Œæ”¯æŒ 8 ç§é¢„å®šä¹‰çŠ¶æ€

**ç¤ºä¾‹**:

```typescript
import { StatusBadge, StatusDot, getStatusConfig } from "@/components/common/status-badge";

// åŸºç¡€ä½¿ç”¨
<StatusBadge status="completed" />
<StatusBadge status="processing" variant="compact" />
<StatusBadge status="pending" customLabel="å®¡æ ¸ä¸­" showIcon={false} />

// è¡¨æ ¼ä¸­çš„çŠ¶æ€ç‚¹
<StatusDot status="active" size="md" animated />

// è·å–çŠ¶æ€é…ç½®
const config = getStatusConfig("completed");
console.log(config.label); // "å·²å®Œæˆ"
console.log(config.className); // "bg-green-500/10..."
```

**æ”¯æŒçš„çŠ¶æ€ç±»å‹**:

- `pending` - å¾…å¤„ç† (é»„è‰²)
- `processing` - å¤„ç†ä¸­ (è“è‰²ï¼Œå¸¦æ—‹è½¬åŠ¨ç”»)
- `completed` - å·²å®Œæˆ (ç»¿è‰²)
- `cancelled` - å·²å–æ¶ˆ (ç°è‰²)
- `failed` - å¤±è´¥ (çº¢è‰²)
- `draft` - è‰ç¨¿ (çŸ³æ¿è‰²)
- `active` - æ¿€æ´» (ç»¿è‰²)
- `inactive` - æœªæ¿€æ´» (ç°è‰²)

---

### DateRangePicker - æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨

**ä½ç½®**: `components/common/date-range-picker.tsx`

**åŠŸèƒ½**: åŒæ—¥å†æ—¥æœŸèŒƒå›´é€‰æ‹©ï¼Œå¸¦å¿«æ·é€‰é¡¹

**ç¤ºä¾‹**:

```typescript
import { DateRangePicker, DatePicker } from "@/components/common/date-range-picker";
import { DateRange } from "react-day-picker";

const [dateRange, setDateRange] = useState<DateRange | undefined>();
const [singleDate, setSingleDate] = useState<Date | undefined>();

// æ—¥æœŸèŒƒå›´é€‰æ‹©
<DateRangePicker
  value={dateRange}
  onChange={setDateRange}
  placeholder="é€‰æ‹©æ—¥æœŸèŒƒå›´"
  className="w-full"
/>

// å•æ—¥æœŸé€‰æ‹©
<DatePicker
  value={singleDate}
  onChange={setSingleDate}
  placeholder="é€‰æ‹©æ—¥æœŸ"
/>
```

**å¿«æ·é€‰é¡¹** (è‡ªåŠ¨åŒ…å«):

- ä»Šå¤©
- æœ€è¿‘ 7 å¤©
- æœ€è¿‘ 30 å¤©
- æœ¬æœˆ

---

## è¡¨å•é¡µç»„ä»¶

### FormLayout - è¡¨å•å¸ƒå±€ç»„ä»¶åº“

**ä½ç½®**: `components/common/form-layout.tsx`

**åŒ…å«ç»„ä»¶**:

1. **FormPage** - è¡¨å•é¡µé¢å®¹å™¨
2. **FormPageHeader** - é¡µé¢æ ‡é¢˜
3. **FormSection** - è¡¨å•åŒºå—
4. **FormRow** - å“åº”å¼è¡Œå¸ƒå±€
5. **FormActions** - æ“ä½œæŒ‰é’®åŒºåŸŸ
6. **FormFieldGroup** - å­—æ®µç»„
7. **FormSteps** - æ­¥éª¤æŒ‡ç¤ºå™¨
8. **FormDivider** - åˆ†éš”çº¿
9. **FormAlert** - ä¿¡æ¯æç¤ºæ¡†

**å®Œæ•´ç¤ºä¾‹**:

```typescript
import {
  FormPage,
  FormPageHeader,
  FormSection,
  FormRow,
  FormFieldGroup,
  FormActions,
  FormSteps,
  FormDivider,
  FormAlert,
} from "@/components/common/form-layout";

export default function MyFormPage() {
  const [currentStep, setCurrentStep] = useState(0);

  const steps = [
    { title: "åŸºæœ¬ä¿¡æ¯", description: "å¡«å†™åŸºæœ¬èµ„æ–™" },
    { title: "è¯¦ç»†ä¿¡æ¯", description: "è¡¥å……è¯¦ç»†å†…å®¹" },
    { title: "ç¡®è®¤æäº¤", description: "æ ¸å¯¹å¹¶æäº¤" },
  ];

  return (
    <FormPage>
      {/* é¡µé¢æ ‡é¢˜ */}
      <FormPageHeader
        title="åˆ›å»ºç”¨æˆ·"
        description="å¡«å†™ç”¨æˆ·ä¿¡æ¯"
      >
        <Button variant="ghost" onClick={() => router.back()}>
          è¿”å›
        </Button>
      </FormPageHeader>

      {/* æ­¥éª¤æŒ‡ç¤ºå™¨ */}
      <FormSteps
        steps={steps}
        currentStep={currentStep}
        onStepClick={setCurrentStep}
      />

      {/* ä¿¡æ¯æç¤º */}
      <FormAlert type="info" title="æç¤º">
        è¯·ç¡®ä¿æ‰€æœ‰å¿…å¡«å­—æ®µå·²å¡«å†™å®Œæ•´
      </FormAlert>

      <form onSubmit={handleSubmit}>
        {/* è¡¨å•åŒºå— */}
        <FormSection
          title="åŸºæœ¬ä¿¡æ¯"
          description="ç”¨æˆ·çš„åŸºæœ¬èµ„æ–™"
          required
        >
          {/* 2åˆ—å¸ƒå±€ */}
          <FormRow columns={2}>
            <FormFieldGroup
              label="ç”¨æˆ·å"
              required
              error={errors.username}
              description="4-20ä¸ªå­—ç¬¦"
            >
              <Input {...register("username")} />
            </FormFieldGroup>

            <FormFieldGroup label="é‚®ç®±" required error={errors.email}>
              <Input type="email" {...register("email")} />
            </FormFieldGroup>
          </FormRow>

          <FormDivider text="è´¦æˆ·è®¾ç½®" />

          {/* 3åˆ—å¸ƒå±€ */}
          <FormRow columns={3}>
            <FormFieldGroup label="è§’è‰²">
              <Select {...register("role")}>
                <SelectTrigger>
                  <SelectValue placeholder="é€‰æ‹©è§’è‰²" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="admin">ç®¡ç†å‘˜</SelectItem>
                  <SelectItem value="user">æ™®é€šç”¨æˆ·</SelectItem>
                </SelectContent>
              </Select>
            </FormFieldGroup>
          </FormRow>
        </FormSection>

        {/* æ“ä½œæŒ‰é’®ï¼ˆç²˜æ€§åº•éƒ¨ï¼‰ */}
        <FormActions align="between" sticky>
          <Button type="button" variant="ghost" onClick={() => router.back()}>
            å–æ¶ˆ
          </Button>
          <div className="flex gap-2">
            <Button type="button" variant="outline">
              ä¿å­˜è‰ç¨¿
            </Button>
            <Button type="submit">æäº¤</Button>
          </div>
        </FormActions>
      </form>
    </FormPage>
  );
}
```

---

### FileUpload - æ–‡ä»¶ä¸Šä¼ ç»„ä»¶

**ä½ç½®**: `components/common/file-upload.tsx`

**åŠŸèƒ½**: æ‹–æ‹½ä¸Šä¼ ã€å›¾ç‰‡é¢„è§ˆã€è¿›åº¦æ˜¾ç¤ºã€é”™è¯¯å¤„ç†

**ç¤ºä¾‹**:

```typescript
import { FileUpload, type UploadedFile } from "@/components/common/file-upload";

const [files, setFiles] = useState<UploadedFile[]>([]);

<FileUpload
  maxSize={10}                    // æœ€å¤§10MB
  maxFiles={5}                    // æœ€å¤š5ä¸ªæ–‡ä»¶
  accept="image/*,.pdf,.doc"      // æ”¯æŒçš„æ–‡ä»¶ç±»å‹
  multiple={true}                 // å…è®¸å¤šé€‰
  value={files}
  onChange={setFiles}
  showPreview={true}              // æ˜¾ç¤ºå›¾ç‰‡é¢„è§ˆ
  onUpload={async (file) => {
    // è‡ªå®šä¹‰ä¸Šä¼ é€»è¾‘
    const formData = new FormData();
    formData.append("file", file);
    await fetch("/api/upload", {
      method: "POST",
      body: formData,
    });
  }}
/>
```

**æ–‡ä»¶çŠ¶æ€**:

- `pending` - å¾…ä¸Šä¼ 
- `uploading` - ä¸Šä¼ ä¸­ï¼ˆæ˜¾ç¤ºè¿›åº¦æ¡ï¼‰
- `success` - ä¸Šä¼ æˆåŠŸï¼ˆç»¿è‰²å‹¾ï¼‰
- `error` - ä¸Šä¼ å¤±è´¥ï¼ˆæ˜¾ç¤ºé”™è¯¯ + é‡è¯•æŒ‰é’®ï¼‰

---

## åŠ è½½çŠ¶æ€ç»„ä»¶

### Skeleton - éª¨æ¶å±

**ä½ç½®**: `components/common/skeleton.tsx`

**åŠŸèƒ½**: æä¾›å¤šç§é¢„è®¾éª¨æ¶å±å’Œè‡ªå®šä¹‰éª¨æ¶å±ç»„ä»¶

**åŸºç¡€ç»„ä»¶**:

```typescript
import { Skeleton } from "@/components/common/skeleton";

// åŸºç¡€éª¨æ¶å±
<Skeleton className="h-4 w-full" variant="rounded" animation="pulse" />
<Skeleton className="h-10 w-10" variant="circle" animation="wave" />
<Skeleton className="h-20 w-full" variant="default" animation="none" />
```

**é¢„è®¾éª¨æ¶å±**:

```typescript
import {
  TableSkeleton,
  CardSkeleton,
  ListItemSkeleton,
  FormSkeleton,
  StatCardSkeleton,
  OrdersPageSkeleton,
  DashboardPageSkeleton,
  FormPageSkeleton,
} from "@/components/common/skeleton";

// è¡¨æ ¼éª¨æ¶å±
<TableSkeleton rows={5} columns={6} showHeader={true} />

// å¡ç‰‡éª¨æ¶å±
<CardSkeleton showImage={true} lines={3} />

// åˆ—è¡¨é¡¹éª¨æ¶å±
<ListItemSkeleton showAvatar={true} showActions={true} />

// è¡¨å•éª¨æ¶å±
<FormSkeleton fields={4} />

// å®Œæ•´é¡µé¢éª¨æ¶å±
<OrdersPageSkeleton />
<DashboardPageSkeleton />
<FormPageSkeleton />
```

**ä½¿ç”¨åœºæ™¯**:

```typescript
function MyComponent() {
  const { data, isLoading } = useSWR("/api/data");

  if (isLoading) {
    return <TableSkeleton rows={8} columns={5} />;
  }

  return <DataTable data={data} />;
}
```

---

## æ— éšœç¢ç»„ä»¶

### Accessibility - æ— éšœç¢è¾…åŠ©ç»„ä»¶

**ä½ç½®**: `components/common/accessibility.tsx`

**åŒ…å«ç»„ä»¶å’Œå·¥å…·**:

#### 1. SkipLink - è·³è¿‡å¯¼èˆªé“¾æ¥

```typescript
import { SkipLink } from "@/components/common/accessibility";

<SkipLink href="#main-content">
  è·³è½¬åˆ°ä¸»å†…å®¹
</SkipLink>
```

#### 2. AccessibleIconButton - å¯è®¿é—®çš„å›¾æ ‡æŒ‰é’®

```typescript
import { AccessibleIconButton } from "@/components/common/accessibility";

<AccessibleIconButton label="åˆ é™¤é¡¹ç›®">
  <Trash2 className="w-4 h-4" />
</AccessibleIconButton>
```

#### 3. LiveRegion - å®æ—¶å…¬å‘ŠåŒºåŸŸ

```typescript
import { LiveRegion } from "@/components/common/accessibility";

<LiveRegion polite="polite">
  {message && <span>{message}</span>}
</LiveRegion>
```

#### 4. FocusTrap - ç„¦ç‚¹é™·é˜±

```typescript
import { FocusTrap } from "@/components/common/accessibility";

<FocusTrap enabled={isModalOpen} onEscape={() => setIsModalOpen(false)}>
  <div>æ¨¡æ€æ¡†å†…å®¹</div>
</FocusTrap>
```

#### 5. useKeyboardShortcut - é”®ç›˜å¿«æ·é”® Hook

```typescript
import { useKeyboardShortcut } from "@/components/common/accessibility";

// Ctrl+S ä¿å­˜
useKeyboardShortcut("s", handleSave, { ctrl: true });

// Ctrl+Shift+N æ–°å»º
useKeyboardShortcut("n", handleNew, { ctrl: true, shift: true });

// ESC å…³é—­
useKeyboardShortcut("Escape", handleClose);
```

#### 6. FieldError - è¡¨å•å­—æ®µé”™è¯¯å…¬å‘Š

```typescript
import { FieldError } from "@/components/common/accessibility";

<FieldError
  id="email-error"
  error={errors.email?.message}
/>
```

#### 7. æ— éšœç¢å·¥å…·å‡½æ•°

```typescript
import { a11y } from "@/components/common/accessibility";

// ç”Ÿæˆå”¯ä¸€ ID
const fieldId = a11y.generateId("username");

// è·å–ç„¦ç‚¹æ ·å¼ç±»å
const focusClasses = a11y.getFocusClasses();

// æ£€æŸ¥æ˜¯å¦å¯ç”¨äº† reduced motion
if (a11y.prefersReducedMotion()) {
  // ç¦ç”¨åŠ¨ç”»
}
```

---

## æœ€ä½³å®è·µ

### 1. åˆ—è¡¨é¡µå¼€å‘

**æ¨èç»“æ„**:

```
â”œâ”€â”€ é¡µé¢æ ‡é¢˜ + æ“ä½œæŒ‰é’®
â”œâ”€â”€ ListFilters (æœç´¢ç­›é€‰)
â”œâ”€â”€ æ‰¹é‡æ“ä½œå·¥å…·æ  (å¯é€‰)
â”œâ”€â”€ Table (æ•°æ®è¡¨æ ¼)
â”‚   â”œâ”€â”€ StatusBadge (çŠ¶æ€åˆ—)
â”‚   â”œâ”€â”€ æ“ä½œåˆ— (DropdownMenu)
â””â”€â”€ ç»Ÿè®¡å¡ç‰‡ (å¯é€‰)
```

**å‚è€ƒ**: `app/(pages)/orders/page.tsx`

### 2. è¡¨å•é¡µå¼€å‘

**æ¨èç»“æ„**:

```
â”œâ”€â”€ FormPageHeader
â”œâ”€â”€ FormSteps (å¤šæ­¥éª¤è¡¨å•)
â”œâ”€â”€ FormAlert (æç¤ºä¿¡æ¯)
â”œâ”€â”€ FormSection Ã— N
â”‚   â”œâ”€â”€ FormRow (å“åº”å¼åˆ—å¸ƒå±€)
â”‚   â””â”€â”€ FormFieldGroup Ã— N
â””â”€â”€ FormActions (æ“ä½œæŒ‰é’®)
```

**å‚è€ƒ**: `app/(pages)/orders/new/page.tsx`

### 3. å“åº”å¼è®¾è®¡åŸåˆ™

- ä½¿ç”¨ `grid` å¸ƒå±€ + `md:` / `lg:` æ–­ç‚¹
- ç§»åŠ¨ç«¯ä¼˜å…ˆ (Mobile First)
- å…³é”®æ“ä½œå§‹ç»ˆå¯è§
- è¡¨æ ¼åœ¨å°å±å¹•è€ƒè™‘å¡ç‰‡å¸ƒå±€

```typescript
// âŒ ä¸æ¨è
<div className="flex">
  <div className="w-1/4">...</div>
  <div className="w-3/4">...</div>
</div>

// âœ… æ¨è
<div className="grid grid-cols-1 md:grid-cols-4 gap-4">
  <div className="md:col-span-1">...</div>
  <div className="md:col-span-3">...</div>
</div>
```

### 4. åŠ è½½çŠ¶æ€å¤„ç†

å§‹ç»ˆæä¾›åŠ è½½åé¦ˆï¼š

```typescript
function MyPage() {
  const { data, isLoading, error } = useSWR("/api/data");

  if (error) return <ErrorState error={error} />;
  if (isLoading) return <OrdersPageSkeleton />;
  if (!data) return <EmptyState />;

  return <DataView data={data} />;
}
```

### 5. æ— éšœç¢æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰å›¾æ ‡æŒ‰é’®æœ‰ `aria-label`
- [ ] è¡¨å•å­—æ®µæœ‰å…³è”çš„ `<label>`
- [ ] é”™è¯¯æ¶ˆæ¯ä½¿ç”¨ `role="alert"`
- [ ] æ¨¡æ€æ¡†ä½¿ç”¨ `role="dialog"` å’Œç„¦ç‚¹é™·é˜±
- [ ] æ”¯æŒé”®ç›˜å¯¼èˆª (Tab, Enter, Escape)
- [ ] åŠ¨æ€å†…å®¹æ›´æ–°ä½¿ç”¨ `aria-live`
- [ ] é¢œè‰²å¯¹æ¯”åº¦ç¬¦åˆ WCAG AA æ ‡å‡†
- [ ] æ”¯æŒ `prefers-reduced-motion`

### 6. æ€§èƒ½ä¼˜åŒ–

```typescript
// æ‡’åŠ è½½éå…³é”®ç»„ä»¶
const HeavyComponent = dynamic(() => import("./HeavyComponent"), {
  loading: () => <CardSkeleton />,
  ssr: false,
});

// è™šæ‹ŸåŒ–é•¿åˆ—è¡¨
import { useVirtualizer } from "@tanstack/react-virtual";

// å›¾ç‰‡ä¼˜åŒ–
<Image
  src="/image.jpg"
  alt="æè¿°"
  width={400}
  height={300}
  loading="lazy"
  placeholder="blur"
/>
```

---

## ğŸ¨ è®¾è®¡ç³»ç»Ÿå‚è€ƒ

### é¢œè‰²å˜é‡

```css
--primary: oklch(0.65 0.25 310);      /* éœ“è™¹ç´« */
--accent: oklch(0.75 0.22 180);       /* é’è‰²å¼ºè°ƒ */
--destructive: oklch(0.60 0.25 25);   /* çº¢è‰² */
--muted: oklch(0.90 0 0);             /* ç°è‰² */
```

### é—´è·ç³»ç»Ÿ

- ç»„ä»¶å†…é—´è·: `p-4`, `p-6`
- ç»„ä»¶é—´é—´è·: `gap-4`, `gap-6`
- é¡µé¢åŒºå—é—´è·: `space-y-6`

### åœ†è§’ç³»ç»Ÿ

- å°: `rounded` (4px)
- ä¸­: `rounded-lg` (8px)
- å¤§: `rounded-xl` (12px)
- åœ†å½¢: `rounded-full`

---

## ğŸ“š å»¶ä¼¸é˜…è¯»

- [Shadcn/UI ç»„ä»¶æ–‡æ¡£](https://ui.shadcn.com/)
- [React Hook Form æ–‡æ¡£](https://react-hook-form.com/)
- [WCAG 2.1 æ— éšœç¢æŒ‡å—](https://www.w3.org/WAI/WCAG21/quickref/)
- [Next.js æ€§èƒ½ä¼˜åŒ–](https://nextjs.org/docs/app/building-your-application/optimizing)
