# 技术栈与组件规范

## 1. 技术栈概览
- **框架**: Next.js 16 (App Router)
- **语言**: TypeScript
- **样式**: Tailwind CSS v4
- **组件库**: Shadcn/UI (基于 Radix UI)
- **图标库**: Lucide React
- **表单**: React Hook Form + Zod
- **数据库**: SQLite (Dev) / Prisma ORM
- **认证**: NextAuth.js v4 / OIDC Provider

## 2. 组件使用规范
- **核心组件复用**：
    - **表格 (Data Tables)**：所有数据列表展示**优先使用** `components/common/data-table.tsx`。该组件已封装了分页、搜索和 Shadcn/UI 样式，支持客户端和服务端模式。
    - **表单容器 (Forms)**：所有侧边栏表单（Sheet）或弹窗表单（Dialog）**优先使用** `components/common/form-sheet.tsx`，以统一标题、描述和底部按钮区的布局。
    - **Shadcn/UI 集成**：任何自定义或封装组件必须严格遵循 Shadcn/UI 的 Design Token（如 `bg-muted`, `text-primary`）和交互模式，禁止硬编码颜色值。
- **Shadcn/UI 基础**：
    - 组件源码位于 `components/ui/`。
    - 禁止随意修改基础组件源码，除非为了全局样式统一。
    - 使用 `cn()` (`clsx` + `tailwind-merge`) 处理类名合并。
- **Icons**：
    - 统一使用 `lucide-react`。
    - 侧边栏等特定场景可使用 `@tabler/icons-react`（仅限保持现有风格）。

## 3. 表单开发规范
- **Zod Schema**：
    - **默认值陷阱**：结合 `useForm` 时，**严禁**在 Zod Schema 中使用 `.default()`。这会导致 TypeScript 类型推断与 `react-hook-form` 的 `defaultValues` 不一致。
    - **必填校验**：字符串必填项使用 `.min(1, "必填提示")`。
- **React Hook Form**：
    - 必须定义 `defaultValues`，确保所有字段都有初始值（如空字符串），避免 Uncontrolled Input 警告。

## 4. 目录结构规范
- `app/`：页面路由、Layout、全局样式。
- `components/`：
    - `ui/`：原子组件 (Button, Input)。
    - `common/`：通用业务组件 (DataTable, FormSheet)。
    - `<module>/`：特定模块组件 (如 `app-sidebar.tsx`)。
- `lib/`：工具函数、Prisma Client 实例、Zod Schemas、常量定义。
- `actions/`：Server Actions (建议放在 `app/actions/` 以便归类)。
